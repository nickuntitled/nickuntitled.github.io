<!DOCTYPE html>
<html lang="en-US" data-theme="light">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0,viewport-fit=cover">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>Face Detection in my thesis - Nick Untitled</title>
		<meta name="description" content="เทคนิคการจับภาพใบหน้ามีการพัฒนามานานแล้ว แต่ในปัจจุบันเทคนิคที่ได้รับการยอมรับพัฒนามาจาก deep learning และเทคนิคที่เอามาใช้คือ RetinaFace โดยนำมาเขียนในภาษาจาวาสคริป">
		<meta name="keywords" content="AI,artifical intelligence,cervical,CROM,deep learning,face detection,javascript,programming,python,range of motion,การจับภาพใบหน้า,การเคลื่อนไหว,งานวิจัย,จาวาสคริป,ปัญญาประดิษฐ์,ศีรษะและลำคอ,เขียนโปรแกรม,ไพทอน,">
		<base href="https://nickuntitled.com" />
		
    	<meta content="2021-02-06T23:28:10+07:00" property="article:published_time">
    	<meta content="https://nickuntitled.com/about/" property="article:author">
  		
		<meta property="og:site_name" content="Nick Untitled">
		<meta property="og:type" content="article" />
		<meta property="og:url" content="https://nickuntitled.com/2021/02/06/face-detection-in-my-thesis/"/>
		<meta property="og:title" content="Face Detection in my thesis - Nick Untitled" />
		<meta property="og:description" content="เทคนิคการจับภาพใบหน้ามีการพัฒนามานานแล้ว แต่ในปัจจุบันเทคนิคที่ได้รับการยอมรับพัฒนามาจาก deep learning และเทคนิคที่เอามาใช้คือ RetinaFace โดยนำมาเขียนในภาษาจาวาสคริป " />
		<meta property="og:image" content="https://asset.nickuntitled.com/2021/02/img_3418.jpg"/>
		<meta name="twitter:card" content="summary_large_image"/>
		<meta property="twitter:title" content="Face Detection in my thesis - Nick Untitled" />
		<meta property="twitter:description" content="เทคนิคการจับภาพใบหน้ามีการพัฒนามานานแล้ว แต่ในปัจจุบันเทคนิคที่ได้รับการยอมรับพัฒนามาจาก deep learning และเทคนิคที่เอามาใช้คือ RetinaFace โดยนำมาเขียนในภาษาจาวาสคริป " />
		<meta property="twitter:image" content="https://asset.nickuntitled.com/2021/02/img_3418.jpg" />
		<link rel="stylesheet" href="assets/css/reset.css">
		<link rel="stylesheet" href="assets/css/highlight.css">
		<link rel="stylesheet" href="assets/css/style.css">
		<link rel="shortcut icon" href="assets/images/favicon.png" />
		<link rel="alternate" type="application/atom+xml" title="Nick Untitled" href="https://nickuntitled.com/atom.xml">
		<link rel="alternate" type="application/json" title="Nick Untitled" href="https://nickuntitled.com/feed.json" />
		<link rel="sitemap" type="application/xml" title="sitemap" href="https://nickuntitled.com/sitemap.xml" />
		<meta name="google-site-verification" content="XXX" />
		<meta name="facebook-domain-verification" content="zjykrcwf7cljpxppixh5ior67ehtw2" />
	</head>
<body>

<div class="container">
	<div class="profile">
		<div class="profile-about">
			<div>
				<h2>Nick Untitled</h2>
			</div>
			<div>
				Writing as my personal diary
			</div>
			<div>
				<ul class = 'go_right'>
					<li><a href = '/'><img src="assets/images/icon/home.svg" class="social-icon"></a></li>
					
					<li><a href = 'https://facebook.com/nicknznick' target="_blank"><img src="assets/images/icon/facebook.svg" class="social-icon"></a></li>
					
					
					<li><a href = 'https://twitter.com/nicknznick' target="_blank"><img src="assets/images/icon/twitter.svg" class="social-icon"></a></li>
					
					
					
					<li><a href = 'https://github.com/nickuntitled' target="_blank"><img src="assets/images/icon/github.svg" class="social-icon"></a></li>
					
					
					<li><a href = 'feed.xml'><img src="assets/images/icon/rss.svg" class="social-icon"></a></li>
					<li><a href = 'about'><img src="assets/images/icon/me.svg" class="social-icon"></a></li>
					<li class="mode" id="mode-switcher" onclick="toggleNightMode();">
						<span></span>
					</li>
				</ul>
			</div>
		</div>
	</div>

	
<div class="blog-post-header">
	<h1>Face Detection in my thesis</h1>
</div>

<div class="post-header">
	<div class="post-date">06.02.2021</div>
	<div class="post-share">
		Share:&nbsp; 
		<a href="https://www.facebook.com/sharer/sharer.php?u=https://nickuntitled.com/face-detection-in-my-thesis" target="_blank"><img src="assets/images/icon/facebook.svg" class="social-icon"></a>
		<a href="https://twitter.com/intent/tweet?source=tweetbutton&amp;original_referer=https://nickuntitled.com/face-detection-in-my-thesis&amp;text=Face Detection in my thesis - https://nickuntitled.com/face-detection-in-my-thesis" target="_blank"><img src="assets/images/icon/twitter.svg" class="social-icon"></a>
	</div>
</div>

	<figure>
		<img src = 'https://asset.nickuntitled.com/2021/02/img_3418.jpg' />
	</figure>
	
<div class="blog-post-content">
	<!-- wp:paragraph -->
<p>ตอนนี้ธีสิสที่ทำอยู่เกี่ยวกับการวัดการเคลื่อนไหวของศีรษะและลำคอในผู้ป่วยที่เป็นมะเร็งศีรษะและลำคอที่ผ่านการทำกายภาพบำบัดที่เดิมจะให้หมอวัดองศาการเคลื่อนไหวของศีรษะและลำคอ (Cervical range of motion) แต่ทีนี้ติดปัญหาเรื่องความแม่นยำ และความน่าเชื้อถือของการวัด (reliability &amp; validity) เราจะทำเป็นตัวโปรแกรมเพื่อให้ประเมินการเคลื่อนไหวจาก webcam แทน แล้วทีนี้ขั้นแรกของเราจะต้องทำคือการใช้เทคนิคการจับภาพใบหน้า (Face detection)</p>
<!-- /wp:paragraph -->

<!-- wp:more -->
<!--more-->
<!-- /wp:more -->

<!-- wp:heading -->
<h2>Face Detection</h2>
<!-- /wp:heading -->

<!-- wp:image {"id":1544,"sizeSlug":"large","className":"is-style-default"} -->
<figure class="wp-block-image size-large is-style-default"><img src="https://asset.nickuntitled.com/2021/02/img_3179-1-2.jpg?w=1024" alt="" class="wp-image-1544" /><figcaption>เทคนิคการจับภาพใบหน้า (Face Detection)</figcaption></figure>
<!-- /wp:image -->

<!-- wp:paragraph -->
<p>Face detection คือเทคนิคการจับภาพใบหน้าจากภาพที่เราต้องการให้จับ โดยเทคนิคนี้มีการพัฒนามาตั้งแต่ 20-30 ปีมาก่อนแล้ว แต่ยังติดปัญหาเรื่องความแม่นยำ ประสิทธิภาพในการทำงานเวลาที่เจอสภาพแสง กล้อง ภาพใบหน้าที่มีแว่นตา แมสบัง และประสิทธิภาพของคอมพิวเตอร์ที่ยังไม่ดีพอ </p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>เทคนิคที่สามารถใช้งานได้จริงในยุคแรก ๆ ก็ได้รับการพัฒนาใน Paul Viola กับ Michael Jones ในบทความงานวิจัยที่มีชื่อว่า <a rel="noreferrer noopener" href="https://ieeexplore.ieee.org/document/937709" target="_blank">Robust Real-time Face Detection</a>  หลังจากนั้นมีการพัฒนาเทคนิคการจับภาพให้ดีขึ้นมาเรื่อย ๆ ได้แก่ <a rel="noreferrer noopener" href="https://ieeexplore.ieee.org/document/1467360" target="_blank">Histogram of Oriented Graidents</a>, <a rel="noreferrer noopener" href="https://ieeexplore.ieee.org/document/5255236" target="_blank">Deformable Part Model</a> และ <a rel="noreferrer noopener" href="https://vision.ics.uci.edu/papers/ZhuR_CVPR_2012/ZhuR_CVPR_2012.pdf" target="_blank">Tree-based structure model</a> เป็นต้น </p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>ต่อมาหลังจากช่วงทศวรรษ 2010s เป็นต้นไป หลังจากการพัฒนาเทคนิคการเรียนรู้ Deep learning ของ <a rel="noreferrer noopener" href="https://proceedings.neurips.cc/paper/2012/hash/c399862d3b9d6b76c8436e924a68c45b-Abstract.html" target="_blank">AlexNet</a> ที่ทดสอบภาพจากฐานข้อมูล ImageNet ให้ประสิทธิภาพที่ดี ร่วมกับประสิทธิภาพของคอมพิวเตอร์ที่ดีขึ้น Deep learning จึงเป็นเทคนิคที่นำมาใช้พัฒนาเทคนิคการจับภาพใบหน้าที่แม่นยำมากขึ้นเรื่อย ๆ เมื่อเทียบกับเทคนิคในสมัยก่อน จนล่าสุดงานที่เราทำก็เอาเทคนิคนี้มาใช้ซึ่งเทคนิคนี้เรียกว่า RetinaFace</p>
<!-- /wp:paragraph -->

<!-- wp:heading -->
<h2>RetinaFace</h2>
<!-- /wp:heading -->

<!-- wp:image {"id":1536,"sizeSlug":"large"} -->
<figure class="wp-block-image size-large"><img src="https://nicknuntitled.files.wordpress.com/2021/02/img_0997.jpg?w=1024" alt="" class="wp-image-1536" /><figcaption>RetinaFace จากบทความ RetinaFace: Single-stage Dense Face Localisation in the Wild</figcaption></figure>
<!-- /wp:image -->

<!-- wp:paragraph -->
<p>RetinaFace เป็นเทคนิคการจับภาพใบหน้าเทคนิคหนึ่งที่ได้รับการตีพิมพ์ในงาน CVPR ปี 2020 ซึ่งเป็นเทคนิคที่ได้รับการยอมรับว่ามีความแม่นยำที่สูง ทำงานได้ดีกับสภาวะแสง กล้อง ภาพใบหน้าที่มีแว่นตา แมสบัง สำหรับคนที่ต้องการอ่านบทความงานวิจัยเพิ่มเติมค้นหาได้จากกูเกิ้ลได้เลยครับ โดยชื่อผลงานวิจัยชิ้นนี้มีชื่อว่า <a rel="noreferrer noopener" href="https://arxiv.org/abs/1905.00641" target="_blank">RetinaFace: Single-stage Dense Face Localisation in the Wild</a></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>เราเลยเอาเทคนิคนี้มาใช้ทดสอบเบื้องต้นก่อน (Preliminary Study) ว่าแม่นยำตามที่บทความพิมพ์จริงไหม โดยเอาตัวโค้ดที่ทางผู้วิจัยมาทดลองเรียนรู้ผ่านคอมพิวเตอร์ (training) แล้วเอามาทดสอบผ่านข้อมูล (dataset) ที่เผยแพร่บนอินเตอร์เน็ตได้แก่ WIDERFACE, 300W_LP และ BIWI kinect dataset พบว่ามีความแม่นยำที่สูง (ประมาณ 94-95% ส่วน 300W_LP ทดสอบแล้วได้ความแม่นยำประมาณ 98-99%)</p>
<!-- /wp:paragraph -->

<!-- wp:heading -->
<h2>Development of Application</h2>
<!-- /wp:heading -->

<!-- wp:image {"id":1542,"sizeSlug":"large"} -->
<figure class="wp-block-image size-large"><a href="https://github.com/scijs/ndarray"><img src="https://asset.nickuntitled.com/2021/02/img_0979-1.png?w=1024" alt="" class="wp-image-1542" /></a><figcaption>เขียนโค้ดภาษา JavaScript</figcaption></figure>
<!-- /wp:image -->

<!-- wp:paragraph -->
<p>จากผลที่ได้เลยเอาเทคนิคนี้ที่เดิมพัฒนาอยู่ในภาษาไพทอนซึ่งเป็นภาษาที่นิยมในด้าน Data Science, AI และมีเครื่องมือช่วยเยอะมาก ได้แก่ PyTorch, Tensorflow, Caffe, ONNZ, numpy เป็นต้น มาพัฒนาในรูปแบบภาษา JavaScript ซึ่งมีข้อแตกต่างจากไพทอนอยู่พอสมควรเนื่องจากมันไม่มีเครื่องมือแบบเดียวกันที่มีในไพทอน เลยลองหาในเน็ตก็เจอว่ามันมีเครื่องมือที่เอาใช้ได้เช่น <a rel="noreferrer noopener" href="https://www.tensorflow.org/js" target="_blank">Tensorflow.js</a>, <a rel="noreferrer noopener" href="https://microsoft.github.io/onnxjs-demo" target="_blank">ONNX.js</a>, <a rel="noreferrer noopener" href="https://github.com/scijs/ndarray" target="_blank">ndarray</a> โดยลักษณะตัวเครื่องมือที่ใช้คล้ายกันกับไพทอน แต่ลักษณะการเขียนโค้ดที่แตกต่างกันออกไป ตัวอย่างเช่น</p>
<!-- /wp:paragraph -->

<!-- wp:list -->
<ul><li>คำสั่งใน Numpy ทั้งหลายแหล่กับตัวเครื่องมือ Ndarray.js ก็ไม่เหมือนกัน ใช้ +,-,*,/ กับตัวแปร ndarray โดยตรงไม่ได้ ต้องทำผ่าน Ndarray ops</li><li>คำสั่งใน Tensorflow.js คล้ายกันกับ Tensorflow ในไพทอน แต่ไม่มีเครื่องมือ Keras ให้ในตัว Tensorflow.js </li><li>เทคนิค deep learning ที่เอามาแปลงให้ใช้กับตัว Tensorflow.js บางเทคนิคที่ซับซ้อนมาก ๆ อาจจะใช้งานตรง ๆ ไม่ค่อยได้เท่าไร พอแปลงมาแล้วทดลองให้จับภาพใบหน้าดูพบว่าตัวเครื่องมือไม่รู้จัก layer ที่ได้เขียนขึ้นมาใหม่ในไพทอน ได้แก่ Feature Pyramids Network</li></ul>
<!-- /wp:list -->

<!-- wp:paragraph -->
<p>เมื่อเลือกเครื่องมือตามที่กล่าวไว้ข้างต้นแล้วเอามาเขียนดู ก็พบว่าทำงานได้อยู่ ส่วนผลที่ได้ก็ตามภาพ แต่ยังติดเรื่องประสิทธิภาพในการทำงานที่ยังทำงานช้าไปหน่อย เนื่องจากตัวโค้ดให้ซีพียูประมวลผล ถ้าปรับแต่งให้ใช้งานการ์ดจอแทนจะทำให้ตัวโปรแกรมจับภาพใบหน้าได้เร็วขึ้นกว่าเดิม เมื่อทำงานได้เร็วขึ้นกว่าเดิม เราก็จะเอามาใช้กับตัวเว็บแคมเพื่อให้ทำงานแบบเรียลไทม์ได้เลย</p>
<!-- /wp:paragraph -->

<!-- wp:image {"id":1543,"sizeSlug":"large"} -->
<figure class="wp-block-image size-large"><img src="https://nickuntitled.com/2021/02/2021-02-06.png?w=1024" alt="" class="wp-image-1543" /><figcaption>ผลที่ได้ตามภาพ</figcaption></figure>
<!-- /wp:image -->

<!-- wp:paragraph -->
<p>ปล. ภาพหน้าปกเอามาจาก<a href="https://en.m.wikipedia.org/wiki/Face_detection">หน้านี้ในวิกิพีเดีย</a></p>
<!-- /wp:paragraph -->

</div>
<div class="tags-container">
	
		<span class="post-tag">AI</span>, 
	
		<span class="post-tag">artifical intelligence</span>, 
	
		<span class="post-tag">cervical</span>, 
	
		<span class="post-tag">CROM</span>, 
	
		<span class="post-tag">deep learning</span>, 
	
		<span class="post-tag">face detection</span>, 
	
		<span class="post-tag">javascript</span>, 
	
		<span class="post-tag">programming</span>, 
	
		<span class="post-tag">python</span>, 
	
		<span class="post-tag">range of motion</span>, 
	
		<span class="post-tag">การจับภาพใบหน้า</span>, 
	
		<span class="post-tag">การเคลื่อนไหว</span>, 
	
		<span class="post-tag">งานวิจัย</span>, 
	
		<span class="post-tag">จาวาสคริป</span>, 
	
		<span class="post-tag">ปัญญาประดิษฐ์</span>, 
	
		<span class="post-tag">ศีรษะและลำคอ</span>, 
	
		<span class="post-tag">เขียนโปรแกรม</span>, 
	
		<span class="post-tag">ไพทอน</span>
	
</div>
<div class="navigation">
	
		<a class="prev" href="/2021/01/24/pm2-5-exercise-today/">< การออกกำลังกายในช่วงเทศกาลฝุ่น PM 2.5</a>
	 
	<a class="next" href="/2021/02/09/coding-in-react-and-others/">Coding in React + Others ></a>

</div>
	
</div>

<div class="footer">
	<span>
		<div class = 'go_left'>
			<p>
				<a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/80x15.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
			</p>
			<p>
				Made with <font color="red">♥</font> on Earth, a minimalist Jekyll Theme by <a href="https://hakan.io"><b>Hakan</b></a> modified a little bit by <a href = 'https://nickuntitled.com'><b>Nick Untitled</b></a>
			</p>
		</div>	

		<div class = 'go_right'>
			<p>
				<strong class = 'top_footer_link'>Links</strong>
			</p>
			<p>
				<ul>
					
					<li><a href = 'https://facebook.com/nicknznick' target="_blank">Facebook</a></li>
					
					
					<li><a href = 'https://twitter.com/nicknznick' target="_blank">Twitter</a></li>
					
					
					
					<li><a href = 'https://github.com/nickuntitled' target="_blank">Github</a></li>
					
					<li><a href = 'about'>About Me</a></li>
					<li><a href = 'privacy-policy'>Privacy Policy</a></li>
				</ul>
			</p>
		</div>
	</span>
</div>

	<!-- Messenger Chat plugin Code -->
	<div id="fb-root"></div>

	<!-- Your Chat plugin code -->
	<div id="fb-customer-chat" class="fb-customerchat">
	</div>

	<script>
	var chatbox = document.getElementById('fb-customer-chat');
	chatbox.setAttribute("page_id", "104741474999804");
	chatbox.setAttribute("attribution", "biz_inbox");

	window.fbAsyncInit = function() {
		FB.init({
		xfbml            : true,
		version          : 'v12.0'
		});
	};

	(function(d, s, id) {
		var js, fjs = d.getElementsByTagName(s)[0];
		if (d.getElementById(id)) return;
		js = d.createElement(s); js.id = id;
		js.src = 'https://connect.facebook.net/en_US/sdk/xfbml.customerchat.js';
		fjs.parentNode.insertBefore(js, fjs);
	}(document, 'script', 'facebook-jssdk'));
	</script>

	<script src="assets/js/ephesus.js"></script>
	<script type="text/javascript">
		if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
			document.documentElement.setAttribute('data-theme', 'dark');
			document.getElementById('mode-switcher').classList.add('active');
		}
	</script>

	
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-46662350-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-46662350-1');
    </script>
	
</body>
</html>